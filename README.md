# Video Service

**Video Service** ‚Äî –ø–∞–π–ø–ª–∞–π–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–π **–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∏–¥–µ–æ—Ñ–∞–π–ª** –∏ **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON** —Å –ø–æ–ª–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

–°–µ—Ä–≤–∏—Å —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –≤–∏–¥–µ–æ** –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –º–æ–Ω—Ç–∞–∂–µ** ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –∫–ª–∏–ø–æ–≤ (—Ö–∞–π–ª–∞–π—Ç–æ–≤)
2. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≥–ª–∞–≤** ‚Äî —Ä–∞–∑–±–∏–µ–Ω–∏–µ –≤–∏–¥–µ–æ –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏–∫–∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ** ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω (—ç–∫—à–µ–Ω, –¥–∏–∞–ª–æ–≥, —é–º–æ—Ä)

## üèóÔ∏è –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
–í–∏–¥–µ–æ—Ñ–∞–π–ª ‚Üí –ß—Ç–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö + –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ
```

**–¶–µ–ª—å**: –ø–æ–ª—É—á–∏—Ç—å `fps`, `duration`, –ø—É—Ç–∏ –∫ –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —ç—Ç–∞–ø–æ–≤.

### –≠—Ç–∞–ø 2: –ê–Ω–∞–ª–∏–∑ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏

```
–í–∏–¥–µ–æ ‚Üí Motion Analysis (FrameDiff + OpticalFlow)
```

**–¶–µ–ª—å**: –ø–æ—Å—Ç—Ä–æ–∏—Ç—å `motion_heatmap[{time, value}]` ‚Äî —Ç–µ–ø–ª–æ–≤—É—é –∫–∞—Ä—Ç—É –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ —Å–µ–∫—É–Ω–¥–∞–º.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –≤—ã—è–≤–ª–µ–Ω–∏–µ —ç–∫—à–µ–Ω-—Å—Ü–µ–Ω (–≤—ã—Å–æ–∫–∏–π motion) vs —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ (–Ω–∏–∑–∫–∏–π motion).

### –≠—Ç–∞–ø 3: –î–µ—Ç–µ–∫—Ü–∏—è –≥—Ä–∞–Ω–∏—Ü –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```
–í–∏–¥–µ–æ ‚Üí Shot Boundary Detection ‚Üí Scene Grouping
```

**–¶–µ–ª—å**: –Ω–∞–π—Ç–∏ `shot_boundaries[list[float]]` –∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤ `scenes[{start,end,shots}]`.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–∏–¥–µ–æ (–∫–∞–¥—Ä—ã ‚Üí —à–æ—Ç—ã ‚Üí —Å—Ü–µ–Ω—ã).

### –≠—Ç–∞–ø 4: –ê—É–¥–∏–æ–∞–Ω–∞–ª–∏–∑

```
–ê—É–¥–∏–æ ‚Üí Audio Features (loudness, energy, speech_probability)
```

**–¶–µ–ª—å**: –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –∞—É–¥–∏–æ—Å–∏–≥–Ω–∞–ª–æ–≤.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¥–µ—Ç–µ–∫—Ü–∏—è –≥—Ä–æ–º–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤, —Ä–µ—á—å vs –º—É–∑—ã–∫–∞, —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø–∏–∫–∏.

### –≠—Ç–∞–ø 5: –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è

```
–ê—É–¥–∏–æ ‚Üí Whisper STT ‚Üí transcript_segments[{start,end,text}]
```

**–¶–µ–ª—å**: —Ç–æ—á–Ω–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ä–µ—á–∏ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —Å–µ–∫—É–Ω–¥–∞–º.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

### –≠—Ç–∞–ø 6: –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

```
–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç ‚Üí Sentiment Analysis ‚Üí sentiment_timeline[{time,score}]
```

**–¶–µ–ª—å**: –æ—Ü–µ–Ω–∏—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω (-1...+1) –∫–∞–∂–¥–æ–≥–æ —Ä–µ—á–µ–≤–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¥—Ä–∞–º–∞—Ç–∏—á–Ω—ã–µ vs –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.

### –≠—Ç–∞–ø 7: –î–µ—Ç–µ–∫—Ü–∏—è —é–º–æ—Ä–∞

```
–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç ‚Üí Humor Detection ‚Üí humor_scores[{time,score}]
```

**–¶–µ–ª—å**: –Ω–∞–π—Ç–∏ —é–º–æ—Ä–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏ –∏ —Å–º–µ—Ö (0...1).
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –∫–æ–º–µ–¥–∏–π–Ω—ã–µ –ø–∏–∫–∏ –¥–ª—è —Ö–∞–π–ª–∞–π—Ç–æ–≤.

### –≠—Ç–∞–ø 8: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

```
–í—Å–µ —Å–∏–≥–Ω–∞–ª—ã ‚Üí Fusion Timeline ‚Üí timeline[{time,interest}]
```

**–¶–µ–ª—å**: –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å motion + audio + sentiment + humor –≤ –µ–¥–∏–Ω—É—é `interest_score` (0...1) –ø–æ –∫–∞–∂–¥–æ–π —Å–µ–∫—É–Ω–¥–µ.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: **–æ—Å–Ω–æ–≤–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞** ‚Äî –≥–¥–µ –∏–º–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∑—Ä–∏—Ç–µ–ª—é.

### –≠—Ç–∞–ø 9: –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ö–∞–π–ª–∞–π—Ç–æ–≤

```
Timeline ‚Üí Highlight Detection ‚Üí highlights[{start,end,type,score}]
```

**–¶–µ–ª—å**: –Ω–∞–π—Ç–∏ –≥–æ—Ç–æ–≤—ã–µ –∫–ª–∏–ø—ã –ø–æ —Ç–∏–ø–∞–º: action, comedy, drama, dialogue.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: **—Å–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—Ä–µ–∑–∫–æ–≤** –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é 3-60 —Å–µ–∫ —Å –æ—Ü–µ–Ω–∫–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏.

### –≠—Ç–∞–ø 10: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–ª–∞–≤

```
Scenes + Highlights ‚Üí Chapter Builder ‚Üí chapters[{start,end,title,desc}]
```

**–¶–µ–ª—å**: —Ä–∞–∑–±–∏—Ç—å –≤–∏–¥–µ–æ –Ω–∞ 5-15 —Å–º—ã—Å–ª–æ–≤—ã—Ö –≥–ª–∞–≤ —Å —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: **–≥–æ—Ç–æ–≤—ã–µ –≥–ª–∞–≤—ã** –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–∫–∞–∫ –≤ YouTube).

### –≠—Ç–∞–ø 11: –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```
–í—Å–µ –¥–∞–Ω–Ω—ã–µ ‚Üí analysis_result.json
```

**–¶–µ–ª—å**: —Å–æ–±—Ä–∞—Ç—å –ø–æ–ª–Ω—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥.

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```json
{
  "duration_seconds": 173.92,
  "fps": 25.0,

  // –ë–∞–∑–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
  "motion_heatmap": [...],
  "shot_boundaries": [0.0, 3.2, 7.6, ...],
  "scenes": [...],
  "transcript_segments": [...],

  // –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  "timeline": [  // ‚Üê –æ—Å–Ω–æ–≤–Ω–∞—è timeline (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
    {"time": 3.0, "interest": 0.82, "motion": 0.67, "sentiment": -0.2}
  ],
  "highlights": [  // ‚Üê –≥–æ—Ç–æ–≤—ã–µ –∫–ª–∏–ø—ã
    {"start": 3.2, "end": 7.1, "type": "action", "score": 0.89}
  ],
  "chapters": [  // ‚Üê –≥–æ—Ç–æ–≤—ã–µ –≥–ª–∞–≤—ã
    {"start": 0.0, "end": 30.0, "title": "–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ"}
  ]
}
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
pip install -e .
python main.py video.mp4
```

**–í—ã–≤–æ–¥**:

```
‚úÖ Pipeline: 15s
üìä Timeline: 174 points
üìä Highlights: 12 (3 action, 2 comedy)
üìä Chapters: 8 scenes
```

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω—Ç–∞–∂**: –≤–∑—è—Ç—å `highlights` –∏ —Å–∫–ª–µ–∏—Ç—å –∫–ª–∏–ø—ã
2. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∏–¥–µ–æ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `chapters` –¥–ª—è –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: `timeline` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∏–∫–∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏
4. **–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç**: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ü–µ–Ω –ø–æ —Ç–∏–ø–∞–º

---

**MIT License** | **–ù–∏–∫–æ–ª–∞–π –ß–µ—Ä–∞—à–µ–≤**

–ò—Å—Ç–æ—á–Ω–∏–∫–∏
